"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3001],{93001:function(n,e,t){t.r(e),t.d(e,{PWChordDiagram:function(){return w}});var r=t(57437),l=t(2265),o=Math.abs,u=Math.cos,a=Math.sin,i=Math.PI,c=i/2,s=2*i,f=Math.max;function d(n,e){return Array.from({length:e-n},(e,t)=>n+t)}var v=t(75075),p=Array.prototype.slice;function y(n){return function(){return n}}function g(n){return n.source}function h(n){return n.target}function x(n){return n.radius}function m(n){return n.startAngle}function A(n){return n.endAngle}function b(){return 0}var C=t(76115),M=t(88425),H=t(41439);function T(n){return n.innerRadius}function O(n){return n.outerRadius}function R(n){return n.startAngle}function Z(n){return n.endAngle}function _(n){return n&&n.padAngle}function k(n,e,t,r,l,o,u){var a=n-t,i=e-r,c=(u?o:-o)/(0,M._b)(a*a+i*i),s=c*i,f=-c*a,d=n+s,v=e+f,p=t+s,y=r+f,g=(d+p)/2,h=(v+y)/2,x=p-d,m=y-v,A=x*x+m*m,b=l-o,C=d*y-p*v,H=(m<0?-1:1)*(0,M._b)((0,M.Fp)(0,b*b*A-C*C)),T=(C*m-x*H)/A,O=(-C*x-m*H)/A,R=(C*m+x*H)/A,Z=(-C*x+m*H)/A,_=T-g,k=O-h,j=R-g,P=Z-h;return _*_+k*k>j*j+P*P&&(T=R,O=Z),{cx:T,cy:O,x01:-s,y01:-f,x11:T*(l/b-1),y11:O*(l/b-1)}}var j=t(87484),P=t(24989),$=t(97254);function w(n){let{nodes:e,matrix:t,width:i=700,height:w=700,ariaLabel:W}=n,[S,V]=(0,l.useState)(null),[E,N]=(0,l.useState)(null),q=Math.min(i,w)/2-40,z=q-20,I=(0,l.useMemo)(()=>(function(n,e){var t=0,r=null,l=null,o=null;function u(u){var a,i=u.length,c=Array(i),v=d(0,i),p=Array(i*i),y=Array(i),g=0;u=Float64Array.from({length:i*i},e?(n,e)=>u[e%i][e/i|0]:(n,e)=>u[e/i|0][e%i]);for(let e=0;e<i;++e){let t=0;for(let r=0;r<i;++r)t+=u[e*i+r]+n*u[r*i+e];g+=c[e]=t}a=(g=f(0,s-t*i)/g)?t:s/i;{let e=0;for(let t of(r&&v.sort((n,e)=>r(c[n],c[e])),v)){let r=e;if(n){let n=d(~i+1,i).filter(n=>n<0?u[~n*i+t]:u[t*i+n]);for(let r of(l&&n.sort((n,e)=>l(n<0?-u[~n*i+t]:u[t*i+n],e<0?-u[~e*i+t]:u[t*i+e])),n))r<0?(p[~r*i+t]||(p[~r*i+t]={source:null,target:null})).target={index:t,startAngle:e,endAngle:e+=u[~r*i+t]*g,value:u[~r*i+t]}:(p[t*i+r]||(p[t*i+r]={source:null,target:null})).source={index:t,startAngle:e,endAngle:e+=u[t*i+r]*g,value:u[t*i+r]};y[t]={index:t,startAngle:r,endAngle:e,value:c[t]}}else{let n=d(0,i).filter(n=>u[t*i+n]||u[n*i+t]);for(let r of(l&&n.sort((n,e)=>l(u[t*i+n],u[t*i+e])),n)){let n;if(t<r?(n=p[t*i+r]||(p[t*i+r]={source:null,target:null})).source={index:t,startAngle:e,endAngle:e+=u[t*i+r]*g,value:u[t*i+r]}:((n=p[r*i+t]||(p[r*i+t]={source:null,target:null})).target={index:t,startAngle:e,endAngle:e+=u[t*i+r]*g,value:u[t*i+r]},t===r&&(n.source=n.target)),n.source&&n.target&&n.source.value<n.target.value){let e=n.source;n.source=n.target,n.target=e}}y[t]={index:t,startAngle:r,endAngle:e,value:c[t]}}e+=a}}return(p=Object.values(p)).groups=y,o?p.sort(o):p}return u.padAngle=function(n){return arguments.length?(t=f(0,n),u):t},u.sortGroups=function(n){return arguments.length?(r=n,u):r},u.sortSubgroups=function(n){return arguments.length?(l=n,u):l},u.sortChords=function(n){return arguments.length?(null==n?o=null:(o=function(e,t){return n(e.source.value+e.target.value,t.source.value+t.target.value)})._=n,u):o&&o._},u})(!0,!1).padAngle(.04).sortSubgroups(j.Z)(t),[t]),B=(0,l.useMemo)(()=>(function(){var n=T,e=O,t=(0,C.Z)(0),r=null,l=R,o=Z,u=_,a=null,i=(0,H.d)(c);function c(){var c,s,f=+n.apply(this,arguments),d=+e.apply(this,arguments),v=l.apply(this,arguments)-M.ou,p=o.apply(this,arguments)-M.ou,y=(0,M.Wn)(p-v),g=p>v;if(a||(a=c=i()),d<f&&(s=d,d=f,f=s),d>M.Ho){if(y>M.BZ-M.Ho)a.moveTo(d*(0,M.mC)(v),d*(0,M.O$)(v)),a.arc(0,0,d,v,p,!g),f>M.Ho&&(a.moveTo(f*(0,M.mC)(p),f*(0,M.O$)(p)),a.arc(0,0,f,p,v,g));else{var h,x,m=v,A=p,b=v,C=p,H=y,T=y,O=u.apply(this,arguments)/2,R=O>M.Ho&&(r?+r.apply(this,arguments):(0,M._b)(f*f+d*d)),Z=(0,M.VV)((0,M.Wn)(d-f)/2,+t.apply(this,arguments)),_=Z,j=Z;if(R>M.Ho){var P=(0,M.ZR)(R/f*(0,M.O$)(O)),$=(0,M.ZR)(R/d*(0,M.O$)(O));(H-=2*P)>M.Ho?(P*=g?1:-1,b+=P,C-=P):(H=0,b=C=(v+p)/2),(T-=2*$)>M.Ho?($*=g?1:-1,m+=$,A-=$):(T=0,m=A=(v+p)/2)}var w=d*(0,M.mC)(m),W=d*(0,M.O$)(m),S=f*(0,M.mC)(C),V=f*(0,M.O$)(C);if(Z>M.Ho){var E,N=d*(0,M.mC)(A),q=d*(0,M.O$)(A),z=f*(0,M.mC)(b),I=f*(0,M.O$)(b);if(y<M.pi){if(E=function(n,e,t,r,l,o,u,a){var i=t-n,c=r-e,s=u-l,f=a-o,d=f*i-s*c;if(!(d*d<M.Ho))return d=(s*(e-o)-f*(n-l))/d,[n+d*i,e+d*c]}(w,W,z,I,N,q,S,V)){var B=w-E[0],F=W-E[1],L=N-E[0],X=q-E[1],Y=1/(0,M.O$)((0,M.Kh)((B*L+F*X)/((0,M._b)(B*B+F*F)*(0,M._b)(L*L+X*X)))/2),D=(0,M._b)(E[0]*E[0]+E[1]*E[1]);_=(0,M.VV)(Z,(f-D)/(Y-1)),j=(0,M.VV)(Z,(d-D)/(Y+1))}else _=j=0}}T>M.Ho?j>M.Ho?(h=k(z,I,w,W,d,j,g),x=k(N,q,S,V,d,j,g),a.moveTo(h.cx+h.x01,h.cy+h.y01),j<Z?a.arc(h.cx,h.cy,j,(0,M.fv)(h.y01,h.x01),(0,M.fv)(x.y01,x.x01),!g):(a.arc(h.cx,h.cy,j,(0,M.fv)(h.y01,h.x01),(0,M.fv)(h.y11,h.x11),!g),a.arc(0,0,d,(0,M.fv)(h.cy+h.y11,h.cx+h.x11),(0,M.fv)(x.cy+x.y11,x.cx+x.x11),!g),a.arc(x.cx,x.cy,j,(0,M.fv)(x.y11,x.x11),(0,M.fv)(x.y01,x.x01),!g))):(a.moveTo(w,W),a.arc(0,0,d,m,A,!g)):a.moveTo(w,W),f>M.Ho&&H>M.Ho?_>M.Ho?(h=k(S,V,N,q,f,-_,g),x=k(w,W,z,I,f,-_,g),a.lineTo(h.cx+h.x01,h.cy+h.y01),_<Z?a.arc(h.cx,h.cy,_,(0,M.fv)(h.y01,h.x01),(0,M.fv)(x.y01,x.x01),!g):(a.arc(h.cx,h.cy,_,(0,M.fv)(h.y01,h.x01),(0,M.fv)(h.y11,h.x11),!g),a.arc(0,0,f,(0,M.fv)(h.cy+h.y11,h.cx+h.x11),(0,M.fv)(x.cy+x.y11,x.cx+x.x11),g),a.arc(x.cx,x.cy,_,(0,M.fv)(x.y11,x.x11),(0,M.fv)(x.y01,x.x01),!g))):a.arc(0,0,f,C,b,g):a.lineTo(S,V)}}else a.moveTo(0,0);if(a.closePath(),c)return a=null,c+""||null}return c.centroid=function(){var t=(+n.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+l.apply(this,arguments)+ +o.apply(this,arguments))/2-M.pi/2;return[(0,M.mC)(r)*t,(0,M.O$)(r)*t]},c.innerRadius=function(e){return arguments.length?(n="function"==typeof e?e:(0,C.Z)(+e),c):n},c.outerRadius=function(n){return arguments.length?(e="function"==typeof n?n:(0,C.Z)(+n),c):e},c.cornerRadius=function(n){return arguments.length?(t="function"==typeof n?n:(0,C.Z)(+n),c):t},c.padRadius=function(n){return arguments.length?(r=null==n?null:"function"==typeof n?n:(0,C.Z)(+n),c):r},c.startAngle=function(n){return arguments.length?(l="function"==typeof n?n:(0,C.Z)(+n),c):l},c.endAngle=function(n){return arguments.length?(o="function"==typeof n?n:(0,C.Z)(+n),c):o},c.padAngle=function(n){return arguments.length?(u="function"==typeof n?n:(0,C.Z)(+n),c):u},c.context=function(n){return arguments.length?(a=null==n?null:n,c):a},c})().innerRadius(z).outerRadius(q),[z,q]),F=(0,l.useMemo)(()=>(function(n){var e=g,t=h,r=x,l=x,i=m,s=A,f=b,d=null;function C(){var y,g=e.apply(this,arguments),h=t.apply(this,arguments),x=f.apply(this,arguments)/2,m=p.call(arguments),A=+r.apply(this,(m[0]=g,m)),b=i.apply(this,m)-c,C=s.apply(this,m)-c,M=+l.apply(this,(m[0]=h,m)),H=i.apply(this,m)-c,T=s.apply(this,m)-c;if(d||(d=y=(0,v.ET)()),x>1e-12&&(o(C-b)>2*x+1e-12?C>b?(b+=x,C-=x):(b-=x,C+=x):b=C=(b+C)/2,o(T-H)>2*x+1e-12?T>H?(H+=x,T-=x):(H-=x,T+=x):H=T=(H+T)/2),d.moveTo(A*u(b),A*a(b)),d.arc(0,0,A,b,C),b!==H||C!==T){if(n){var O=+n.apply(this,arguments),R=M-O,Z=(H+T)/2;d.quadraticCurveTo(0,0,R*u(H),R*a(H)),d.lineTo(M*u(Z),M*a(Z)),d.lineTo(R*u(T),R*a(T))}else d.quadraticCurveTo(0,0,M*u(H),M*a(H)),d.arc(0,0,M,H,T)}if(d.quadraticCurveTo(0,0,A*u(b),A*a(b)),d.closePath(),y)return d=null,y+""||null}return n&&(C.headRadius=function(e){return arguments.length?(n="function"==typeof e?e:y(+e),C):n}),C.radius=function(n){return arguments.length?(r=l="function"==typeof n?n:y(+n),C):r},C.sourceRadius=function(n){return arguments.length?(r="function"==typeof n?n:y(+n),C):r},C.targetRadius=function(n){return arguments.length?(l="function"==typeof n?n:y(+n),C):l},C.startAngle=function(n){return arguments.length?(i="function"==typeof n?n:y(+n),C):i},C.endAngle=function(n){return arguments.length?(s="function"==typeof n?n:y(+n),C):s},C.padAngle=function(n){return arguments.length?(f="function"==typeof n?n:y(+n),C):f},C.source=function(n){return arguments.length?(e=n,C):e},C.target=function(n){return arguments.length?(t=n,C):t},C.context=function(n){return arguments.length?(d=null==n?null:n,C):d},C})().radius(z),[z]),L=(0,l.useCallback)((n,r)=>{if(V(n),null!==n&&r){let l=t[n].reduce((n,e)=>n+e,0),o=t.reduce((e,t)=>e+t[n],0);N({x:r.clientX,y:r.clientY,content:"".concat(e[n].name,"\nCitations given: ").concat((0,$.Py)(l),"\nCitations received: ").concat((0,$.Py)(o))})}else N(null)},[t,e]),X=(0,l.useCallback)((n,r,l,o)=>{if(o){var u,a;let i=null!==(a=null===(u=t[r])||void 0===u?void 0:u[n])&&void 0!==a?a:0;N({x:o.clientX,y:o.clientY,content:"".concat(e[n].name," → ").concat(e[r].name,": ").concat((0,$.Py)(l),"\n").concat(e[r].name," → ").concat(e[n].name,": ").concat((0,$.Py)(i))})}},[t,e]);return(0,r.jsxs)("div",{className:"relative w-full h-full flex items-center justify-center",children:[(0,r.jsxs)("svg",{viewBox:"".concat(-i/2," ").concat(-w/2," ").concat(i," ").concat(w),className:"w-full h-full",style:{maxWidth:i,maxHeight:w},role:"img","aria-label":null!=W?W:"Chord diagram showing relationships between ".concat(e.map(n=>n.name).join(", ")),children:[I.groups.map(n=>{var t,l,o,u,a,i,c,s,f;let d=null===S||S===n.index;return(0,r.jsxs)("g",{children:[(0,r.jsx)("path",{d:null!==(a=B(n))&&void 0!==a?a:"",fill:null!==(i=null===(t=e[n.index])||void 0===t?void 0:t.color)&&void 0!==i?i:"#888",fillOpacity:d?.9:.2,stroke:"hsl(var(--background))",strokeWidth:1,style:{cursor:"pointer",transition:"fill-opacity 0.2s"},onMouseEnter:e=>L(n.index,e),onMouseMove:e=>L(n.index,e),onMouseLeave:()=>L(null)}),n.endAngle-n.startAngle>.08&&(0,r.jsx)("text",{transform:(()=>{let e=(n.startAngle+n.endAngle)/2*180/Math.PI-90,t=q+8;return"rotate(".concat(e,") translate(").concat(t,",0) ").concat(e>90?"rotate(180)":"")})(),textAnchor:(n.startAngle+n.endAngle)/2*180/Math.PI-90>90?"end":"start",fontSize:9,fill:"hsl(var(--foreground))",fillOpacity:d?.9:.3,style:{transition:"fill-opacity 0.2s"},children:(null!==(c=null===(l=e[n.index])||void 0===l?void 0:l.name)&&void 0!==c?c:"").length>16?(null!==(s=null===(o=e[n.index])||void 0===o?void 0:o.name)&&void 0!==s?s:"").slice(0,14)+"...":null!==(f=null===(u=e[n.index])||void 0===u?void 0:u.name)&&void 0!==f?f:""})]},"arc-".concat(n.index))}),I.map((n,t)=>{var l,o,u;let a=null===S||S===n.source.index||S===n.target.index;return(0,r.jsx)("path",{d:null!==(o=F(n))&&void 0!==o?o:"",fill:null!==(u=null===(l=e[n.source.index])||void 0===l?void 0:l.color)&&void 0!==u?u:"#888",fillOpacity:a?.5:.05,stroke:a?"hsl(var(--foreground) / 0.15)":"none",strokeWidth:.5,style:{cursor:"pointer",transition:"fill-opacity 0.2s"},onMouseEnter:e=>X(n.source.index,n.target.index,n.source.value,e),onMouseMove:e=>X(n.source.index,n.target.index,n.source.value,e),onMouseLeave:()=>N(null)},"ribbon-".concat(t))})]}),E&&(0,r.jsx)("div",{className:"fixed pointer-events-none z-50 rounded-lg border bg-card px-3 py-2 text-sm shadow-md",style:{...P.sz,left:E.x+12,top:E.y-10,maxWidth:280,whiteSpace:"pre-line"},children:E.content})]})}}}]);