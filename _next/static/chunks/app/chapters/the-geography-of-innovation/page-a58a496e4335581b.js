(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4947],{11490:function(e,t,n){Promise.resolve().then(n.bind(n,98879))},98879:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var a=n(57437),i=n(2265),o=n(25553),r=n(49739),s=n(10949),l=n(55407),c=n(29268),d=n(58362),h=n(96063),u=n(6963),m=n(51749),f=n(24427),p=n(79989),g=n(10219);let y={"01":"AL","02":"AK","04":"AZ","05":"AR","06":"CA","08":"CO","09":"CT",10:"DE",11:"DC",12:"FL",13:"GA",15:"HI",16:"ID",17:"IL",18:"IN",19:"IA",20:"KS",21:"KY",22:"LA",23:"ME",24:"MD",25:"MA",26:"MI",27:"MN",28:"MS",29:"MO",30:"MT",31:"NE",32:"NV",33:"NH",34:"NJ",35:"NM",36:"NY",37:"NC",38:"ND",39:"OH",40:"OK",41:"OR",42:"PA",44:"RI",45:"SC",46:"SD",47:"TN",48:"TX",49:"UT",50:"VT",51:"VA",53:"WA",54:"WV",55:"WI",56:"WY"},x={AL:"Alabama",AK:"Alaska",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District of Columbia",FL:"Florida",GA:"Georgia",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"},v=["hsl(221, 70%, 94%)","hsl(221, 70%, 84%)","hsl(221, 70%, 74%)","hsl(221, 70%, 64%)","hsl(221, 70%, 54%)","hsl(221, 70%, 44%)","hsl(221, 70%, 34%)"];function b(e){return e>=1e6?"".concat((e/1e6).toFixed(1),"M"):e>=1e3?"".concat((e/1e3).toFixed(0),"K"):e.toLocaleString()}function j(e){let{data:t,valueLabel:n="Patents",valueFormatter:o=b}=e,r=(0,i.useRef)(null),[s,l]=(0,i.useState)(null),[c,d]=(0,i.useState)(null);(0,i.useEffect)(()=>{fetch("".concat("","/geo/us-states.json")).then(e=>e.json()).then(e=>l(e))},[]);let h=(0,i.useMemo)(()=>Object.values(t),[t]),u=(0,i.useMemo)(()=>{if(0===h.length)return(0,p.Z)().domain([0,1]).range(v);let e=Math.max(...h),t=Math.pow(10,Math.floor(Math.log10(e)));return(0,p.Z)().domain([0,Math.ceil(e/t)*t]).range(v)},[h]),j=(0,i.useMemo)(()=>{if(!s)return[];let e=s.objects.states;return g.Z(s,e).features},[s]),w=(0,i.useMemo)(()=>(0,m.Z)().scale(1100).translate([480,300]),[]),S=(0,i.useMemo)(()=>(0,f.Z)().projection(w),[w]),N=(0,i.useCallback)((e,t,n)=>{var a;let i=r.current;if(!i)return;let s=i.getBoundingClientRect();d({x:e.clientX-s.left,y:e.clientY-s.top-10,content:"".concat(null!==(a=x[t])&&void 0!==a?a:t,": ").concat(null!=n?o(n):"N/A")})},[o]),M=(0,i.useCallback)(()=>d(null),[]);if(!s)return(0,a.jsx)("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Loading map..."});let[k,E]=u.domain();return(0,a.jsxs)("div",{className:"relative w-full h-full flex flex-col",children:[(0,a.jsx)("svg",{ref:r,viewBox:"0 0 960 600",className:"w-full flex-1",children:j.map(e=>{var n;let i=y[String(e.id).padStart(2,"0")],o=i?t[i]:void 0,r=null!=o?u(o):"hsl(var(--muted))";return(0,a.jsx)("path",{d:null!==(n=S(e))&&void 0!==n?n:"",fill:r,stroke:"hsl(var(--background))",strokeWidth:.8,className:"transition-opacity hover:opacity-80 cursor-pointer",onMouseMove:e=>N(e,null!=i?i:"",o),onMouseLeave:M},e.id)})}),c&&(0,a.jsx)("div",{className:"absolute pointer-events-none z-10 rounded-md border bg-card px-3 py-1.5 text-sm shadow-md",style:{left:c.x,top:c.y,transform:"translate(-50%, -100%)"},children:c.content}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-1 mt-2 mb-4 shrink-0",children:[(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:o(k)}),v.map((e,t)=>(0,a.jsx)("div",{className:"w-8 h-3 rounded-sm",style:{backgroundColor:e}},t)),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:o(E)}),(0,a.jsx)("span",{className:"ml-2 text-xs text-muted-foreground",children:n})]})]})}var w=n(1144),S=n(2599),N=n(94534);let M={"004":"AF","008":"AL","012":"DZ","024":"AO","032":"AR","036":"AU","040":"AT","050":"BD","056":"BE","076":"BR",100:"BG",104:"MM",112:"BY",116:"KH",120:"CM",124:"CA",144:"LK",152:"CL",156:"CN",158:"TW",170:"CO",188:"CR",191:"HR",192:"CU",196:"CY",203:"CZ",208:"DK",214:"DO",218:"EC",818:"EG",233:"EE",231:"ET",246:"FI",250:"FR",276:"DE",288:"GH",300:"GR",320:"GT",344:"HK",348:"HU",352:"IS",356:"IN",360:"ID",364:"IR",368:"IQ",372:"IE",376:"IL",380:"IT",392:"JP",398:"KZ",400:"JO",404:"KE",408:"KP",410:"KR",414:"KW",422:"LB",434:"LY",440:"LT",442:"LU",458:"MY",484:"MX",504:"MA",508:"MZ",528:"NL",554:"NZ",566:"NG",578:"NO",586:"PK",604:"PE",608:"PH",616:"PL",620:"PT",634:"QA",642:"RO",643:"RU",682:"SA",686:"SN",688:"RS",702:"SG",703:"SK",704:"VN",705:"SI",710:"ZA",724:"ES",752:"SE",756:"CH",760:"SY",764:"TH",780:"TT",784:"AE",788:"TN",792:"TR",800:"UG",804:"UA",826:"GB",834:"TZ",840:"US",858:"UY",862:"VE",887:"YE",894:"ZM"},k={US:"United States",CA:"Canada",MX:"Mexico",BR:"Brazil",GB:"United Kingdom",FR:"France",DE:"Germany",IT:"Italy",ES:"Spain",NL:"Netherlands",BE:"Belgium",CH:"Switzerland",SE:"Sweden",NO:"Norway",DK:"Denmark",FI:"Finland",AT:"Austria",IE:"Ireland",PL:"Poland",CZ:"Czechia",HU:"Hungary",RU:"Russia",CN:"China",JP:"Japan",KR:"South Korea",TW:"Taiwan",IN:"India",SG:"Singapore",MY:"Malaysia",AU:"Australia",NZ:"New Zealand",IL:"Israel",TR:"Turkey",SA:"Saudi Arabia",IR:"Iran",ZA:"South Africa",UG:"Uganda",CM:"Cameroon",PE:"Peru"},E={US:[-98,39],CA:[-106,56],MX:[-102,23],BR:[-53,-10],GB:[-2,54],FR:[2,47],DE:[10,51],IT:[12,42],ES:[-4,40],NL:[5.3,52.1],BE:[4.5,50.8],CH:[8.2,46.8],SE:[15,62],NO:[8,61],DK:[10,56],FI:[26,64],AT:[14,47.5],IE:[-8,53.5],PL:[19,52],CZ:[15,50],HU:[19,47],RU:[40,55],CN:[104,35],JP:[138,36],KR:[128,36],TW:[121,24],IN:[79,22],SG:[104,1.3],MY:[102,4],AU:[134,-25],NZ:[174,-41],IL:[35,31.5],TR:[35,39],SA:[45,24],IR:[53,32],ZA:[25,-29],UG:[32,1],CM:[12,6],PE:[-75,-10]},C={US:"Americas",CA:"Americas",MX:"Americas",BR:"Americas",PE:"Americas",GB:"Europe",FR:"Europe",DE:"Europe",IT:"Europe",ES:"Europe",NL:"Europe",BE:"Europe",CH:"Europe",SE:"Europe",NO:"Europe",DK:"Europe",FI:"Europe",AT:"Europe",IE:"Europe",PL:"Europe",CZ:"Europe",HU:"Europe",RU:"Europe",CN:"East Asia",JP:"East Asia",KR:"East Asia",TW:"East Asia",IN:"South Asia",SG:"South Asia",MY:"South Asia",AU:"Oceania",NZ:"Oceania",IL:"Middle East",TR:"Middle East",SA:"Middle East",IR:"Middle East",ZA:"Africa",UG:"Africa",CM:"Africa"},_={Americas:"hsl(210, 75%, 50%)",Europe:"hsl(145, 60%, 42%)","East Asia":"hsl(25, 85%, 52%)","South Asia":"hsl(280, 60%, 55%)",Oceania:"hsl(340, 65%, 52%)","Middle East":"hsl(50, 75%, 45%)",Africa:"hsl(175, 60%, 42%)"},A=["hsl(221, 60%, 94%)","hsl(221, 65%, 84%)","hsl(221, 68%, 74%)","hsl(221, 70%, 62%)","hsl(221, 72%, 50%)","hsl(221, 75%, 38%)"];function T(e){let{data:t,maxFlows:n=20}=e,o=(0,i.useRef)(null),[r,s]=(0,i.useState)(null),[l,c]=(0,i.useState)(null),[d,h]=(0,i.useState)(null);(0,i.useEffect)(()=>{fetch("".concat("","/geo/world-110m.json")).then(e=>e.json()).then(e=>s(e))},[]);let u=(0,i.useMemo)(()=>(0,w.Z)().scale(160).translate([480,300]),[]),m=(0,i.useMemo)(()=>(0,f.Z)().projection(u),[u]),y=(0,i.useMemo)(()=>t.filter(e=>!!e.from_country&&!!e.to_country),[t]),x=(0,i.useMemo)(()=>{let e={};return y.forEach(t=>{e[t.from_country]=(e[t.from_country]||0)+t.flow_count,e[t.to_country]=(e[t.to_country]||0)+t.flow_count}),e},[y]),v=(0,i.useMemo)(()=>{let e=Object.values(x);return 0===e.length?(0,p.Z)().domain([0,1]).range(A):(0,p.Z)().domain([0,Math.max(...e)]).range(A)},[x]),b=(0,i.useMemo)(()=>{if(!r)return[];let e=r.objects.countries;return g.Z(r,e).features},[r]),j=(0,i.useMemo)(()=>y.filter(e=>E[e.from_country]&&E[e.to_country]).slice(0,n),[y,n]),T=(0,i.useMemo)(()=>0===j.length?1:Math.max(...j.map(e=>e.flow_count)),[j]),I=(0,i.useMemo)(()=>{let e=Object.values(x);return 0===e.length?(0,N.Z)().domain([0,1]).range([2,8]):(0,N.Z)().domain([0,Math.max(...e)]).range([2.5,9])},[x]),L=(0,i.useMemo)(()=>{let e=new Set;return j.forEach(t=>{e.add(t.from_country),e.add(t.to_country)}),[...e].filter(e=>E[e])},[j]),P=(0,i.useMemo)(()=>L.map(e=>({code:e,total:x[e]||0})).sort((e,t)=>t.total-e.total).slice(0,10).map(e=>e.code),[L,x]),U=(0,i.useMemo)(()=>{let e=new Set;j.forEach(t=>{let n=[t.from_country,t.to_country].sort().join("-");e.add(n)});let t=new Set;return j.forEach(e=>{j.find(t=>t.from_country===e.to_country&&t.to_country===e.from_country)&&t.add([e.from_country,e.to_country].sort().join("-"))}),t},[j]),K=(0,i.useMemo)(()=>j.map(e=>{let t=E[e.from_country],n=E[e.to_country];if(!t||!n)return null;let a=(0,S.Z)(t,n),i=[];for(let e=0;e<=60;e++){let t=u(a(e/60));t&&i.push(t)}if(i.length<2)return null;let o=[e.from_country,e.to_country].sort().join("-");if(U.has(o)){let t=e.from_country<e.to_country?3:-3;for(let e=0;e<i.length;e++){let n=i[Math.max(0,e-1)],a=i[Math.min(i.length-1,e+1)],o=a[0]-n[0],r=a[1]-n[1],s=Math.sqrt(o*o+r*r)||1;i[e]=[i[e][0]+-r/s*t,i[e][1]+o/s*t]}}let r="M".concat(i[0][0],",").concat(i[0][1]);for(let e=1;e<i.length;e++)r+=" L".concat(i[e][0],",").concat(i[e][1]);let s=1+e.flow_count/T*5,l=.3+e.flow_count/T*.5,c=function(e){var t;let n=C[e];return n&&null!==(t=_[n])&&void 0!==t?t:"hsl(0, 0%, 55%)"}(e.from_country);return{d:r,width:s,opacity:l,flow:e,from_country:e.from_country,to_country:e.to_country,color:c}}).filter(Boolean),[j,T,u,U]),B=(0,i.useCallback)((e,t)=>{let n=o.current;if(!n)return;let a=n.getBoundingClientRect(),i=x[t];if(null==i)return;let r=k[t]||t,s=i>=1e3?"".concat((i/1e3).toFixed(1),"K"):i.toLocaleString();c({x:e.clientX-a.left,y:e.clientY-a.top-10,content:"".concat(r,": ").concat(s," inventor moves")}),h(t)},[x]),D=(0,i.useCallback)((e,t)=>{var n,a;let i=o.current;if(!i)return;let r=i.getBoundingClientRect(),s=k[null!==(n=t.from_country)&&void 0!==n?n:""]||t.from_country,l=k[null!==(a=t.to_country)&&void 0!==a?a:""]||t.to_country,d=t.flow_count>=1e3?"".concat((t.flow_count/1e3).toFixed(1),"K"):t.flow_count.toLocaleString();c({x:e.clientX-r.left,y:e.clientY-r.top-10,content:"".concat(s," → ").concat(l,": ").concat(d," moves")})},[]),R=(0,i.useCallback)(()=>{c(null),h(null)},[]);return r?(0,a.jsxs)("div",{className:"relative w-full h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex-1 min-h-0 relative",children:[(0,a.jsxs)("svg",{ref:o,viewBox:"0 0 960 600",className:"w-full h-full",children:[(0,a.jsxs)("defs",{children:[Object.entries(_).map(e=>{let[t,n]=e;return(0,a.jsx)("marker",{id:"arrow-".concat(t.replace(/\s/g,"-")),viewBox:"0 0 10 10",refX:"8",refY:"5",markerWidth:"4",markerHeight:"4",orient:"auto-start-reverse",children:(0,a.jsx)("path",{d:"M 0 2 L 8 5 L 0 8 Z",fill:n,fillOpacity:.8})},t)}),(0,a.jsx)("marker",{id:"arrow-default",viewBox:"0 0 10 10",refX:"8",refY:"5",markerWidth:"4",markerHeight:"4",orient:"auto-start-reverse",children:(0,a.jsx)("path",{d:"M 0 2 L 8 5 L 0 8 Z",fill:"hsl(0, 0%, 55%)",fillOpacity:.8})}),(0,a.jsxs)("filter",{id:"arc-glow",x:"-20%",y:"-20%",width:"140%",height:"140%",children:[(0,a.jsx)("feGaussianBlur",{stdDeviation:"2",result:"blur"}),(0,a.jsx)("feComposite",{in:"SourceGraphic",in2:"blur",operator:"over"})]})]}),b.map(e=>{var t;let n=M[String(e.id).padStart(3,"0")],i=n?x[n]:void 0,o=null!=i?v(i):"hsl(var(--muted) / 0.3)",r=d===n,s=d&&n&&j.some(e=>e.from_country===d&&e.to_country===n||e.to_country===d&&e.from_country===n),l=d&&!r&&!s&&null!=i;return(0,a.jsx)("path",{d:null!==(t=m(e))&&void 0!==t?t:"",fill:o,stroke:"hsl(var(--background))",strokeWidth:r?1.5:.5,opacity:l?.4:1,className:"cursor-pointer",style:{transition:"opacity 0.2s, stroke-width 0.2s"},onMouseMove:e=>n&&B(e,n),onMouseLeave:R},e.id)}),K.map((e,t)=>{var n;let i=d&&(e.from_country===d||e.to_country===d),o=null!==(n=C[e.from_country])&&void 0!==n?n:"default",r="arrow-".concat(o.replace(/\s/g,"-"));return(0,a.jsx)("path",{d:e.d,fill:"none",stroke:e.color,strokeWidth:i?1.5*e.width:e.width,strokeOpacity:d&&!i?.08:e.opacity,strokeLinecap:"round",markerEnd:"url(#".concat(r,")"),filter:i?"url(#arc-glow)":void 0,className:"cursor-pointer",style:{transition:"stroke-opacity 0.2s, stroke-width 0.2s"},onMouseMove:t=>D(t,e.flow),onMouseLeave:R},t)}),L.map(e=>{let t=E[e];if(!t)return null;let n=u(t);if(!n)return null;let i=I(x[e]||0),o=d===e,r=d&&j.some(t=>t.from_country===d&&t.to_country===e||t.to_country===d&&t.from_country===e);return(0,a.jsx)("circle",{cx:n[0],cy:n[1],r:o?1.4*i:i,fill:"hsl(221, 70%, 50%)",fillOpacity:!d||o||r?.85:.2,stroke:"hsl(var(--background))",strokeWidth:o?1.5:.8,className:"cursor-pointer",style:{transition:"r 0.2s, fill-opacity 0.2s"},onMouseMove:t=>B(t,e),onMouseLeave:R},e)}),P.map(e=>{let t=E[e];if(!t)return null;let n=u(t);if(!n)return null;let i=I(x[e]||0);return(0,a.jsx)("text",{x:n[0],y:n[1]-i-3,textAnchor:"middle",fontSize:9,fontWeight:600,fill:"hsl(var(--foreground))",fillOpacity:.75,className:"pointer-events-none select-none",children:e},"label-".concat(e))})]}),l&&(0,a.jsx)("div",{className:"absolute pointer-events-none z-10 rounded-md border bg-card px-3 py-1.5 text-sm shadow-md",style:{left:l.x,top:l.y,transform:"translate(-50%, -100%)"},children:l.content})]}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-2 pt-4 pb-2 text-xs text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{children:"Low"}),A.map((e,t)=>(0,a.jsx)("div",{className:"w-6 h-3 rounded-sm border border-border/30",style:{backgroundColor:e}},t)),(0,a.jsx)("span",{children:"High"}),(0,a.jsx)("span",{className:"ml-1 opacity-70",children:"(total moves)"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-x-4 gap-y-1",children:[(0,a.jsx)("span",{className:"font-medium",children:"Flow origin:"}),Object.entries(_).map(e=>{let[t,n]=e;return(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsxs)("svg",{width:"20",height:"8",viewBox:"0 0 20 8",children:[(0,a.jsx)("line",{x1:"1",y1:"4",x2:"15",y2:"4",stroke:n,strokeWidth:"2",strokeLinecap:"round"}),(0,a.jsx)("polygon",{points:"15,1.5 20,4 15,6.5",fill:n,fillOpacity:.8})]}),(0,a.jsx)("span",{children:t})]},t)})]})]})]}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Loading map..."})}var I=n(15530),L=n(37395),P=n(66031),U=n(45531),K=n(66437),B=n(86449),D=n(24989),R=n(78705);function O(){var e,t;let{data:n,loading:m}=(0,o.k)("chapter4/us_states_summary.json"),{data:f,loading:p}=(0,o.k)("chapter4/countries_per_year.json"),{data:g,loading:y}=(0,o.k)("chapter4/top_cities.json"),{data:x,loading:v}=(0,o.k)("chapter4/state_specialization.json"),{data:b,loading:w}=(0,o.k)("chapter4/us_states_per_year.json"),{data:S,loading:N}=(0,o.k)("chapter4/inventor_state_flows.json"),{data:M,loading:k}=(0,o.k)("chapter4/inventor_country_flows.json"),{data:E,loading:C}=(0,o.k)("chapter4/inventor_mobility_trend.json"),{data:_}=(0,o.k)("chapter4/innovation_diffusion_summary.json"),{data:A}=(0,o.k)("chapter4/regional_specialization.json"),O=(0,i.useMemo)(()=>n?n.map(e=>({...e,label:e.state})):[],[n]),Z=(0,i.useMemo)(()=>g?g.map(e=>({...e,label:"".concat(e.city,", ").concat(e.state)})):[],[g]),{pivoted:G,countries:z}=(0,i.useMemo)(()=>f?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,n={};e.forEach(e=>{n[e.country]=(n[e.country]||0)+e.count});let a=Object.entries(n).sort((e,t)=>t[1]-e[1]).slice(0,t).map(e=>{let[t]=e;return t});return{pivoted:[...new Set(e.map(e=>e.year))].sort().map(t=>{let n={year:t};return e.filter(e=>e.year===t&&a.includes(e.country)).forEach(e=>{n[e.country]=e.count}),n}),countries:a}}(f):{pivoted:[],countries:[]},[f]),F=(0,i.useMemo)(()=>{if(!x)return[];let e=Object.keys(R.Ph).filter(e=>"Y"!==e),t={};return x.forEach(e=>{t[e.state]||(t[e.state]={state:e.state,total:0}),t[e.state][e.section]=e.count,t[e.state].total+=e.count}),Object.values(t).sort((e,t)=>t.total-e.total).map(t=>{let n={state:t.state};return e.forEach(e=>{n[e]=t.total>0?+(100*(t[e]||0)/t.total).toFixed(1):0}),n})},[x]),H=(0,i.useMemo)(()=>{if(!n)return{};let e={};return n.forEach(t=>{e[t.state]=t.total_patents}),e},[n]),W=(0,i.useMemo)(()=>S?S.slice(0,30).map(e=>({...e,label:"".concat(e.from_state," → ").concat(e.to_state)})):[],[S]),{stateTimePivot:Y,stateTimeNames:J}=(0,i.useMemo)(()=>{if(!b)return{stateTimePivot:[],stateTimeNames:[]};let e={};b.forEach(t=>{e[t.state]=(e[t.state]||0)+t.count});let t=Object.entries(e).sort((e,t)=>t[1]-e[1]).slice(0,10).map(e=>{let[t]=e;return t});return{stateTimePivot:[...new Set(b.map(e=>e.year))].sort().map(e=>{let n={year:e};return b.filter(n=>n.year===e&&t.includes(n.state)).forEach(e=>{n[e.state]=e.count}),n}),stateTimeNames:t}},[b]),V=(0,i.useMemo)(()=>A?[...A].filter(e=>e.location_quotient>=1.5).sort((e,t)=>t.location_quotient-e.location_quotient).slice(0,30):[],[A]),q=Object.keys(R.Ph).filter(e=>"Y"!==e),Q=null!==(t=null==n?void 0:null===(e=n[0])||void 0===e?void 0:e.state)&&void 0!==t?t:"California";return(0,a.jsxs)("div",{children:[(0,a.jsx)(r.K,{number:5,title:"The Geography of Innovation",subtitle:"Spatial distribution, concentration, and mobility patterns in US patent activity"}),(0,a.jsxs)(U.u,{children:[(0,a.jsx)("li",{children:"Patent activity is disproportionately concentrated geographically: the top five US states (California, Texas, New York, Massachusetts, and Michigan) account for approximately 46% of all grants."}),(0,a.jsx)("li",{children:"Japan, Germany, and South Korea constitute the leading foreign sources of US patents, reflecting their established national innovation systems."}),(0,a.jsx)("li",{children:"Geographic concentration of patenting has intensified over time, with innovation hubs such as Silicon Valley and the Boston-Cambridge corridor demonstrating accelerating divergence from other regions."}),(0,a.jsx)("li",{children:"China's share of US patents has increased substantially since the 2000s, though from a comparatively low initial base."})]}),(0,a.jsxs)("aside",{className:"my-8 rounded-lg border bg-muted/30 p-5",children:[(0,a.jsx)("h2",{className:"mb-2 text-sm font-semibold uppercase tracking-wide text-muted-foreground",children:"Executive Summary"}),(0,a.jsx)("p",{className:"text-sm leading-relaxed",children:"The top five US states (California, Texas, New York, Massachusetts, and Michigan) account for approximately 46% of all patent grants. California alone produces more patents than the bottom 30 states combined. Internationally, Japan, Germany, and South Korea lead foreign filings, while China's share has risen substantially since the 2000s. At the city level, concentration is more pronounced still: San Jose, San Diego, Austin, San Francisco, and Houston account for the largest shares of output, and regional specialization patterns -- such as Detroit in mechanical engineering and San Diego in semiconductor and wireless technology -- appear notably persistent in the available data."})]}),(0,a.jsx)(s.n,{children:(0,a.jsxs)("p",{children:["Innovation activity is not evenly distributed across geographic space. A small number of states account for the majority of US patent output, with ",(0,a.jsx)(l._,{value:Q})," leading by a substantial margin. Internationally, the landscape has shifted considerably as Asian economies have become major sources of US patent filings."]})}),(0,a.jsx)(d.B,{title:"Patent Activity Concentrates on the Coasts, with California Producing More Than the Bottom 30 States Combined",caption:"This choropleth map displays total utility patents by primary inventor state from 1976 to 2025, with darker shading indicating higher patent counts. The coastal concentration is pronounced, with California, New York, and Texas exhibiting the highest totals.",insight:"The coastal concentration of patent activity reflects the co-location of technology firms, research universities, and venture capital in a small number of self-reinforcing innovation ecosystems.",loading:m,height:650,children:(0,a.jsx)(j,{data:H,valueLabel:"Patents"})}),(0,a.jsx)(L.c,{children:(0,a.jsx)("p",{children:"Innovation activity is disproportionately concentrated in coastal states. California alone accounts for more patents than the bottom 30 states combined, reflecting the predominant role of Silicon Valley in the US innovation ecosystem."})}),(0,a.jsx)(I.d,{label:"State Rankings"}),(0,a.jsx)(d.B,{title:"California Accounts for Nearly One-Quarter (23.6%) of All US Patent Grants, 1976–2025",caption:"This chart ranks US states by total utility patents attributed to primary inventors from 1976 to 2025. California leads by a substantial margin, followed by Texas, New York, Massachusetts, and Michigan.",insight:"California accounts for nearly one-quarter (23.6%) of all US patent activity, a concentration driven by the Silicon Valley ecosystem of venture capital, research universities, and technology firms.",loading:m,height:1200,children:(0,a.jsx)(h.o,{data:O,xKey:"label",bars:[{key:"total_patents",name:"Total Patents",color:D.ZE[0]}],layout:"vertical"})}),(0,a.jsx)(s.n,{children:(0,a.jsx)("p",{children:"California, home to Silicon Valley, accounts for more US patents than any other state, followed by Texas, New York, Massachusetts, and Michigan. This concentration reflects the co-location of technology companies and research universities in established innovation hubs."})}),(0,a.jsx)(L.c,{children:(0,a.jsx)("p",{children:"The top five states (California, Texas, New York, Massachusetts, and Michigan) account for approximately 46% of all US patents. This pronounced concentration reflects the self-reinforcing nature of innovation clusters: skilled workers, venture capital, research universities, and corporate research laboratories co-locate, creating ecosystems that are difficult for other regions to replicate."})}),Y.length>0&&(0,a.jsx)(d.B,{title:"California's Patent Output Has Diverged Sharply from Other Leading States Since the 1990s",caption:"This chart displays annual patent grants for the 10 leading states by total output from 1976 to 2025. California exhibits an accelerating divergence from the second-ranked state beginning in the early 1990s, with the gap widening in each subsequent decade.",insight:"California's accelerating divergence from other states since the 1990s is consistent with the compounding advantages characteristic of self-reinforcing innovation ecosystems.",loading:w,children:(0,a.jsx)(u.J,{data:Y,xKey:"year",lines:J.map((e,t)=>({key:e,name:e,color:D.ZE[t%D.ZE.length]})),yLabel:"Patents",referenceLines:(0,B.kM)(B.Ik,{only:[1995,2001,2008]})})}),(0,a.jsx)(L.c,{children:(0,a.jsx)("p",{children:"The time-series trajectories of state-level patent output reveal divergent growth patterns. California's patent output has increased at a substantially faster rate than that of other states since the 1990s, driven by the expansion of Silicon Valley and the broader California technology ecosystem. Texas and Washington have also demonstrated strong growth, reflecting the emergence of technology clusters in Austin, Dallas, and Seattle."})}),(0,a.jsx)(I.d,{label:"City Level"}),(0,a.jsx)(d.B,{title:"San Jose, San Diego, and Austin Lead All US Cities in Total Patent Output",caption:"This chart ranks US cities by total utility patents attributed to primary inventors from 1976 to 2025. City-level data reveal concentration patterns that are even more pronounced than state-level figures, with the top five cities accounting for a disproportionate share of national output.",insight:"City-level data reveal more pronounced geographic concentration than state-level figures, with a small number of technology hubs accounting for a disproportionate share of national innovation output.",loading:y,height:1400,children:(0,a.jsx)(h.o,{data:Z,xKey:"label",bars:[{key:"total_patents",name:"Total Patents",color:D.ZE[2]}],layout:"vertical"})}),(0,a.jsx)(s.n,{children:(0,a.jsx)("p",{children:"At the city level, geographic concentration is more pronounced still. A small number of technology hubs -- San Jose, San Diego, Austin, San Francisco, and Houston -- account for the largest shares of patent output. These cities have maintained their leading positions for decades, suggesting that geographic clustering in innovation exhibits strong path dependence."})}),(0,a.jsx)(L.c,{children:(0,a.jsx)("p",{children:"The persistence of geographic clustering challenges the expectation that digital communication technologies would distribute innovation activity more evenly. Despite the expansion of remote work and global connectivity, physical proximity to other innovators, investors, and specialized labor markets appears to continue conferring substantial advantages in the innovation process."})}),(0,a.jsx)(I.d,{label:"International"}),(0,a.jsx)(d.B,{title:"Japan Leads Foreign Patent Filings, While South Korea and China Have Risen Substantially Since the 2000s",caption:"This chart displays annual utility patent grants by primary inventor country for the top 8 countries by total output. Japan maintained the largest foreign share through the 1990s, while South Korea and China have demonstrated the most pronounced growth in the 2000s and 2010s respectively.",insight:"Japan's leading position among foreign filers reflects decades of sustained corporate research and development investment, while South Korea's rise is consistent with the expansion of firms such as Samsung and LG into global patent markets.",loading:p,children:(0,a.jsx)(u.J,{data:G,xKey:"year",lines:z.map((e,t)=>({key:e,name:e,color:D.ZE[t%D.ZE.length]})),yLabel:"Patents",referenceLines:(0,B.kM)(B.Ik,{only:[1995,2001,2008]})})}),(0,a.jsx)(s.n,{children:(0,a.jsx)("p",{children:"The share of domestically originated patents in the United States has declined over the decades as inventors from Japan, Germany, South Korea, and China have substantially increased their filings. By the 2010s, foreign-origin inventors accounted for more than half of all US patent grants."})}),(0,a.jsx)(L.c,{children:(0,a.jsx)("p",{children:"The US patent system has evolved into a global institution. Japan dominated foreign filings through the 1990s, and Germany held the second position among foreign filers through the 2000s before being surpassed by South Korea (2015) and China (2020). South Korea and China have emerged as significant contributors in the 2000s and 2010s respectively. China's sustained growth in US patent filings is indicative of a fundamental shift in global innovation capacity."})}),F.length>0&&(0,a.jsx)(d.B,{title:"States Exhibit Distinctive Technology Specialization Profiles Aligned with Regional Industry",caption:"This chart displays the CPC technology section distribution for all states by total patents, with each bar summing to 100%. States with pharmaceutical hubs show elevated Chemistry shares, while technology-oriented states concentrate in Electricity and Physics.",insight:"Geographic concentration of innovation creates self-reinforcing cycles, as talent, capital, and knowledge spillovers cluster in established hubs that develop distinctive technology specializations aligned with regional industry structures.",loading:v,height:1200,children:(0,a.jsx)(h.o,{data:F,xKey:"state",bars:q.map(e=>({key:e,name:"".concat(e,": ").concat(R.Ph[e]),color:D.Dn[e]})),layout:"vertical",stacked:!0,yFormatter:e=>"".concat(e,"%"),xDomain:[0,100]})}),(0,a.jsx)(L.c,{children:(0,a.jsx)("p",{children:"State technology specialization reflects regional industrial strengths. States with major pharmaceutical hubs (New Jersey, Connecticut) exhibit higher Chemistry shares, while traditional manufacturing states demonstrate stronger Mechanical Engineering concentrations. California and Washington show elevated Electricity and Physics shares, reflecting the influence of Silicon Valley and the Pacific Northwest technology corridor."})}),(0,a.jsx)(I.d,{label:"Inventor Mobility"}),(0,a.jsx)(s.n,{children:(0,a.jsxs)("p",{children:["Extending beyond static snapshots of patent origins, tracking individual inventors across their patent histories reveals patterns of"," ",(0,a.jsx)(l._,{value:"geographic mobility"})," -- the manner in which innovators relocate between states and countries over their careers."]})}),E&&E.length>0&&(0,a.jsx)(d.B,{title:"Both Domestic and International Inventor Mobility Rates Have Increased Over Time",caption:"This chart displays the percentage of patents filed by inventors who relocated from a different state or country since their previous patent. Both domestic (interstate) and international mobility rates exhibit upward trends over the study period.",insight:"Inventor mobility constitutes an important mechanism for knowledge diffusion, as mobile inventors carry tacit knowledge and professional networks from one innovation hub to another.",loading:C,children:(0,a.jsx)(u.J,{data:E,xKey:"year",lines:[{key:"domestic_mobility_pct",name:"Domestic Mobility (% Interstate)",color:D.ZE[0]},{key:"intl_mobility_pct",name:"International Mobility (%)",color:D.ZE[3]}],yLabel:"Percent",yFormatter:e=>"".concat(e.toFixed(1),"%"),referenceLines:(0,B.kM)(B.Ik,{only:[1995,2001,2008]})})}),(0,a.jsx)(L.c,{children:(0,a.jsx)("p",{children:"Inventor mobility patterns illuminate the dynamic nature of innovation geography. While the majority of inventors remain in the same location throughout their patenting careers, a significant minority relocates between states or countries, carrying knowledge and professional networks with them. This geographic diffusion of human capital appears to serve an important function in extending innovation capabilities beyond established technology hubs."})}),W.length>0&&(0,a.jsx)(d.B,{title:"California Serves as Both the Largest Source and Destination of Interstate Inventor Migration",caption:"This chart displays the most common state-to-state inventor moves, based on sequential patents filed from different states. California-linked corridors dominate, reflecting the state's role as the primary hub for inventor talent flows.",insight:"The dominant migration corridors reveal the gravitational pull of major technology clusters, with California functioning as both the largest source and destination of inventor talent.",loading:N,height:900,children:(0,a.jsx)(h.o,{data:W,xKey:"label",bars:[{key:"flow_count",name:"Moves",color:D.ZE[0]}],layout:"vertical"})}),M&&M.length>0&&(0,a.jsx)(d.B,{title:"The United States Functions as the Primary Global Hub for International Inventor Migration",caption:"This map displays global inventor migration flows between countries, with arc width representing the volume of moves and country shading indicating total inventor movement. The United States emerges as the central node, connecting East Asian, European, and other innovation ecosystems.",insight:"The United States functions as the primary global hub for inventor migration, connecting East Asian, European, and other innovation ecosystems through flows of researchers and engineers.",loading:k,height:650,wide:!0,children:(0,a.jsx)(T,{data:M,maxFlows:25})}),(0,a.jsx)(L.c,{children:(0,a.jsx)("p",{children:"The dominant migration corridors reflect the gravitational pull of major technology clusters. California functions as both the largest source and destination of inventor migration within the United States, while internationally, the United States serves as the primary hub connecting inventors from East Asia, Europe, and other regions."})}),(0,a.jsx)(I.d,{label:"Innovation Diffusion"}),(0,a.jsx)(s.n,{children:(0,a.jsx)("p",{children:"Tracking patent activity in AI, Biotech & Pharma, and Clean Energy across cities reveals a consistent diffusion pattern: innovations typically originate in a small number of pioneering locations before spreading geographically as knowledge and talent disperse to secondary hubs."})}),_&&_.length>0&&(0,a.jsx)("div",{className:"max-w-3xl mx-auto my-8",children:_.map(e=>(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold mb-2",children:e.tech_area}),(0,a.jsx)("div",{className:"flex gap-4 overflow-x-auto text-xs",children:e.periods.filter(e=>e.total_patents>0).map(e=>(0,a.jsxs)("div",{className:"flex-shrink-0 text-center px-3 py-2 rounded-lg bg-muted/50",children:[(0,a.jsx)("div",{className:"font-mono font-medium",children:e.period}),(0,a.jsxs)("div",{className:"text-muted-foreground",children:[e.total_cities," cities"]}),(0,a.jsxs)("div",{className:"font-semibold",children:[e.total_patents.toLocaleString()," patents"]})]},e.period))})]},e.tech_area))}),(0,a.jsx)(L.c,{children:(0,a.jsx)("p",{children:"All three technology areas exhibit a consistent diffusion pattern: early concentration in a small number of pioneering cities followed by geographic spread. AI patenting was predominantly concentrated in Silicon Valley and several East Coast hubs in the 1990s but has since spread to dozens of cities worldwide. Biotech demonstrates a similar pattern anchored by Boston, San Francisco, and San Diego. Clean energy patenting remains more geographically dispersed, reflecting the heterogeneous nature of renewable technologies."})}),(0,a.jsx)(I.d,{label:"Regional Specialization"}),(0,a.jsx)(s.n,{children:(0,a.jsx)("p",{children:"The Location Quotient (LQ) measures a city's relative specialization in a given technology area: an LQ above 1 indicates that the city accounts for a higher share of that technology than the national average. Elevated LQ values indicate distinctive innovation ecosystems with pronounced comparative advantages."})}),V.length>0&&(0,a.jsxs)("div",{className:"max-w-4xl mx-auto my-8 overflow-x-auto",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-center mb-3 text-muted-foreground",children:"Most Specialized Innovation Hubs (2010-2025, LQ ≥ 1.5)"}),(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-border",children:[(0,a.jsx)("th",{className:"text-left py-2 px-3 font-medium text-muted-foreground",children:"City"}),(0,a.jsx)("th",{className:"text-center py-2 px-3 font-medium text-muted-foreground",children:"State"}),(0,a.jsx)("th",{className:"text-center py-2 px-3 font-medium text-muted-foreground",children:"Section"}),(0,a.jsx)("th",{className:"text-right py-2 px-3 font-medium text-muted-foreground",children:"Location Quotient"}),(0,a.jsx)("th",{className:"text-right py-2 px-3 font-medium text-muted-foreground",children:"Patents"})]})}),(0,a.jsx)("tbody",{children:V.map((e,t)=>{var n;return(0,a.jsxs)("tr",{className:"border-b border-border/50",children:[(0,a.jsx)("td",{className:"py-2 px-3",children:e.city}),(0,a.jsx)("td",{className:"text-center py-2 px-3",children:e.state}),(0,a.jsxs)("td",{className:"text-center py-2 px-3",children:[e.section,": ",null!==(n=R.Ph[e.section])&&void 0!==n?n:""]}),(0,a.jsx)("td",{className:"text-right py-2 px-3 font-mono font-semibold",children:e.location_quotient.toFixed(2)}),(0,a.jsx)("td",{className:"text-right py-2 px-3 font-mono",children:e.metro_section_count.toLocaleString()})]},t)})})]})]}),(0,a.jsx)(L.c,{children:(0,a.jsx)("p",{children:"Regional specialization reveals the distinctive innovation profiles of American cities. Detroit's mechanical engineering concentration reflects its automotive heritage. San Diego exhibits a pronounced concentration in Electricity, reflecting its semiconductor and wireless technology base. Research Triangle cities in North Carolina demonstrate strong chemistry specialization. These patterns suggest that innovation ecosystems develop persistent comparative advantages shaped by local industry, universities, and talent pools."})}),(0,a.jsx)(s.n,{children:"Having examined the spatial distribution of innovation, the subsequent chapter investigates how inventors and organizations connect across these geographic boundaries. The collaboration networks that link inventors, firms, and countries constitute the channels through which knowledge flows, and their structure indicates whether the innovation ecosystem is becoming more interconnected or more fragmented over time."}),(0,a.jsx)(c.V,{children:"Geographic data uses the primary inventor (sequence 0) location from PatentsView disambiguated records. Only utility patents with valid location data are included. Inventor mobility is inferred from changes in reported location between sequential patents by the same disambiguated inventor. Innovation diffusion tracks patent activity in AI, Biotech & Pharma, and Clean Energy across cities with 5+ patents per period. Regional specialization uses Location Quotient (LQ) computed for US cities with 500+ patents (2010-2025)."}),(0,a.jsx)(K.M,{currentChapter:5}),(0,a.jsx)(P.W,{currentChapter:5})]})}},15530:function(e,t,n){"use strict";n.d(t,{d:function(){return i}});var a=n(57437);function i(e){let{label:t}=e;return(0,a.jsxs)("div",{className:"relative my-12 flex items-center",children:[(0,a.jsx)("div",{className:"flex-grow border-t border-border"}),t&&(0,a.jsx)("span",{className:"mx-4 text-xs font-medium uppercase tracking-widest text-muted-foreground",children:t}),(0,a.jsx)("div",{className:"flex-grow border-t border-border"})]})}},55407:function(e,t,n){"use strict";n.d(t,{_:function(){return i}});var a=n(57437);function i(e){let{value:t}=e;return(0,a.jsx)("span",{className:"font-semibold text-foreground bg-primary/5 px-1 rounded border-b-2 border-primary/20",children:t})}},96063:function(e,t,n){"use strict";n.d(t,{o:function(){return y}});var a=n(57437),i=n(2265),o=n(91436),r=n(77031),s=n(56940),l=n(97059),c=n(35794),d=n(62994),h=n(78155),u=n(53250),m=n(64378),f=n(20407),p=n(24989),g=n(97254);function y(e){let{data:t,xKey:n,bars:y,layout:x="horizontal",stacked:v=!1,colorByValue:b=!1,xLabel:j,yLabel:w,yFormatter:S,xDomain:N}=e,M="vertical"===x,k=(0,i.useMemo)(()=>M?Math.min(260,Math.max(110,...t.map(e=>{var t;return 6.8*String(null!==(t=e[n])&&void 0!==t?t:"").length+16}))):10,[M,t,n]);return(0,a.jsx)(o.h,{width:"100%",height:"100%",children:(0,a.jsxs)(r.v,{data:t,layout:M?"vertical":"horizontal",margin:{top:5,right:10,left:M?k+10:10,bottom:5},barCategoryGap:M?"20%":"15%",children:[(0,a.jsx)(s.q,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),M?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.K,{type:"number",tick:{fontSize:12,fill:"hsl(var(--muted-foreground))"},tickLine:!1,axisLine:{stroke:"hsl(var(--border))"},tickFormatter:null!=S?S:g.Py,domain:N,allowDataOverflow:!!N,ticks:N?[0,20,40,60,80,100]:void 0,children:w&&(0,a.jsx)(c.__,{value:w,position:"insideBottom",offset:-2,style:{fill:"hsl(var(--muted-foreground))",fontSize:13}})}),(0,a.jsx)(d.B,{type:"category",dataKey:n,tick:{fontSize:12,fill:"hsl(var(--muted-foreground))"},tickLine:!1,axisLine:!1,width:k,children:j&&(0,a.jsx)(c.__,{value:j,angle:-90,position:"insideLeft",style:{fill:"hsl(var(--muted-foreground))",fontSize:13},offset:-5})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.K,{dataKey:n,tick:{fontSize:12,fill:"hsl(var(--muted-foreground))"},tickLine:!1,axisLine:{stroke:"hsl(var(--border))"},children:j&&(0,a.jsx)(c.__,{value:j,position:"insideBottom",offset:-2,style:{fill:"hsl(var(--muted-foreground))",fontSize:13}})}),(0,a.jsx)(d.B,{tick:{fontSize:12,fill:"hsl(var(--muted-foreground))"},tickLine:!1,axisLine:!1,tickFormatter:null!=S?S:g.Py,width:60,children:w&&(0,a.jsx)(c.__,{value:w,angle:-90,position:"insideLeft",style:{fill:"hsl(var(--muted-foreground))",fontSize:13},offset:-5})})]}),(0,a.jsx)(h.u,{contentStyle:p.sz,cursor:{fill:"hsl(var(--muted-foreground) / 0.08)"},formatter:(e,t)=>[S?S(Number(e)):(0,g.Py)(Number(e)),t]}),(0,a.jsx)(u.D,{wrapperStyle:{paddingTop:12,fontSize:12},iconType:"circle",iconSize:8}),y.map((e,n)=>{var i;return(0,a.jsx)(m.$Q,{dataKey:e.key,name:e.name,fill:null!==(i=e.color)&&void 0!==i?i:p.ZE[n%p.ZE.length],stackId:v?"stack":void 0,radius:M?[0,4,4,0]:[4,4,0,0],children:b&&t.map((e,t)=>(0,a.jsx)(f.b,{fill:p.ZE[t%p.ZE.length]},t))},e.key)})]})})}}},function(e){e.O(0,[2972,9611,894,4274,7557,2971,2117,1744],function(){return e(e.s=11490)}),_N_E=e.O()}]);